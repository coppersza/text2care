"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[968],{7968:(F,g,r)=>{r.r(g),r.d(g,{TokenModule:()=>D});var a=r(9808),T=r(3025),p=r(5020);class m{constructor(){this.storeUID="00000000-0000-0000-0000-000000000000",this.productTypeId=0,this.sort="name",this.pageNumber=1,this.pageSize=3}}var e=r(4893),d=r(520),u=r(4004),l=r(9646),f=r(1118),_=r(2340);let k=(()=>{class o{constructor(t){this.http=t,this.baseUrl=_.N.apiUrl,this.tokens=[],this.stores=[],this.productTypes=[],this.pagination=new f._,this.tokenParams=new m,this.tokenCache=new Map}getTokens(t){if(!1===t&&(this.tokenCache=new Map),this.tokenCache.size>0&&t&&this.tokenCache.has(Object.values(this.tokenParams).join("-")))return this.pagination.data=this.tokenCache.get(Object.values(this.tokenParams).join("-")),(0,l.of)(this.pagination);let n=new d.LE;return n=n.append("storeUID",this.tokenParams.storeUID.toString()),0!==this.tokenParams.productTypeId&&(n=n.append("productTypeId",this.tokenParams.productTypeId.toString())),this.tokenParams.search&&(n=n.append("search",this.tokenParams.search)),n=n.append("sort",this.tokenParams.sort),n=n.append("pageIndex",this.tokenParams.pageNumber.toString()),n=n.append("pageSize",this.tokenParams.pageSize.toString()),this.http.get(this.baseUrl+"tokenuser",{observe:"response",params:n}).pipe((0,u.U)(s=>(this.tokenCache.set(Object.values(this.tokenParams).join("-"),s.body.data),this.pagination=s.body,this.pagination)))}setTokenParams(t){this.tokenParams=t}getTokenParams(){return this.tokenParams}getToken(t){let n;return this.tokenCache.forEach(s=>{n=s.find(c=>c.tokenUID===t)}),n||n?(0,l.of)(n):this.http.get(this.baseUrl+"token/"+t)}getStores(){return this.stores.length>0?(0,l.of)(this.stores):this.http.get(this.baseUrl+"store").pipe((0,u.U)(t=>(this.stores=t,t)))}getProductTypes(){return this.productTypes.length>0?(0,l.of)(this.productTypes):this.http.get(this.baseUrl+"product/producttype").pipe((0,u.U)(t=>(this.productTypes=t,t)))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(d.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var h=r(2382),v=r(1654);let C=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-token-item"]],inputs:{token:"token"},decls:15,vars:11,consts:[[1,"card","card-body","flex-fill"],[1,"img-fluid",2,"object-fit","cover","object-position","center","width","250px","height","250px","border","none 0px #CCC","cursor","pointer",3,"src","alt","routerLink"],[3,"routerLink"],[1,"text-uppercase"],[1,"mb-2"],[1,"fa-solid","fa-circle-info"],["type","button",1,"btn","btn-primary","fa","fa-info",3,"routerLink"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"img",1),e.TgZ(2,"a",2)(3,"h5",3),e._uU(4),e.qZA()(),e.TgZ(5,"h6",3),e._uU(6),e.qZA(),e.TgZ(7,"span",4),e._uU(8),e.ALo(9,"date"),e.qZA(),e.TgZ(10,"span",4),e._uU(11),e.qZA(),e._UZ(12,"i",5),e.TgZ(13,"div"),e._UZ(14,"button",6),e.qZA()()),2&t&&(e.xp6(1),e.s9C("src",n.token.imageURL,e.LSH),e.s9C("alt",n.token.tokenName),e.MGl("routerLink","/token/",n.token.tokenUID,""),e.xp6(1),e.MGl("routerLink","/token/",n.token.tokenUID,""),e.xp6(2),e.Oqu(n.token.tokenName),e.xp6(2),e.Oqu(n.token.storeName),e.xp6(2),e.Oqu(e.lcZ(9,9,n.token.dateCreated)),e.xp6(3),e.Oqu(n.token.productType),e.xp6(3),e.MGl("routerLink","/token/",n.token.tokenUID,""))},directives:[p.rH,p.yS],pipes:[a.uU],styles:[".btn[_ngcontent-%COMP%]{width:100%;height:50px}.image[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{opacity:1}.image[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover   button[_ngcontent-%COMP%]{transform:none;opacity:1}.hover-overlay[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0;background:rgba(255,255,255,.5);opacity:0;transition:all .5s}.hover-overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{z-index:1000;transition:all .5s}.hover-overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-of-type{transform:translate(-20px)}.hover-overlay[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-of-type{transform:translate(20px)}"]}),o})();var Z=r(6241);const x=["search"];function y(o,i){if(1&o&&(e.TgZ(0,"option",19),e._uU(1),e.qZA()),2&o){const t=i.$implicit,n=e.oxw(2);e.Q6J("selected",n.tokenParams.sort===t.value)("value",t.value),e.xp6(1),e.hij(" ",t.name," ")}}function P(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"li",20),e.NdJ("click",function(){const c=e.CHM(t).$implicit;return e.oxw(2).onStoreSelected(c.storeUID)}),e._uU(1),e.qZA()}if(2&o){const t=i.$implicit,n=e.oxw(2);e.ekj("active",t.storeUID===n.tokenParams.storeUID),e.Q6J("value",t.id),e.xp6(1),e.hij("",t.storeName," ")}}function b(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"li",20),e.NdJ("click",function(){const c=e.CHM(t).$implicit;return e.oxw(2).onProductTypeSelected(c.id)}),e._uU(1),e.qZA()}if(2&o){const t=i.$implicit,n=e.oxw(2);e.ekj("active",t.id===n.tokenParams.productTypeId),e.Q6J("value",t.id),e.xp6(1),e.hij("",t.name," ")}}function S(o,i){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"select",14),e.NdJ("change",function(s){return e.CHM(t),e.oxw().onSortSelected(s.target.value)}),e.YNc(2,y,2,3,"option",15),e.qZA(),e.TgZ(3,"h5",16),e._uU(4,"Shops"),e.qZA(),e.TgZ(5,"ul",17),e.YNc(6,P,2,4,"li",18),e.qZA(),e.TgZ(7,"h5",16),e._uU(8,"Types"),e.qZA(),e.TgZ(9,"ul",17),e.YNc(10,b,2,4,"li",18),e.qZA(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.sortOptions),e.xp6(4),e.Q6J("ngForOf",t.stores),e.xp6(4),e.Q6J("ngForOf",t.productTypes)}}function U(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",21)(1,"input",22,23),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw().onSearch()}),e.qZA(),e.TgZ(3,"button",24),e.NdJ("click",function(){return e.CHM(t),e.oxw().onSearch()}),e._uU(4,"Search"),e.qZA(),e.TgZ(5,"button",25),e.NdJ("click",function(){return e.CHM(t),e.oxw().onReset()}),e._uU(6,"Reset"),e.qZA()()}}function A(o,i){if(1&o&&(e.TgZ(0,"div",26),e._UZ(1,"app-token-item",27),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.Q6J("token",t)}}function O(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",28)(1,"app-pager",29),e.NdJ("pageChanged",function(s){return e.CHM(t),e.oxw().onPageChanged(s)}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("pageSize",t.tokenParams.pageSize)("totalCount",t.totalCount)("pageNumber",t.tokenParams.pageNumber)}}let q=(()=>{class o{constructor(t){this.tokenService=t,this.sortOptions=[{name:"Alphabetical",value:"name"},{name:"Date: Low to High",value:"dateAsc"},{name:"Date: High to Low ",value:"dateDesc"}],this.tokenParams=this.tokenService.getTokenParams()}ngOnInit(){this.getTokens(!0),this.getStores(),this.getProductTypes()}getTokens(t=!1){this.tokenService.getTokens(t).subscribe(n=>{this.tokens=n.data,this.totalCount=n.count},n=>{console.log(n)})}getStores(){this.tokenService.getStores().subscribe(t=>{this.stores=t},t=>{console.log(t)})}getProductTypes(){this.tokenService.getProductTypes().subscribe(t=>{this.productTypes=t,this.productTypes=[{id:0,name:"All",description:""},...t]},t=>{console.log(t)})}onStoreSelected(t){const n=this.tokenService.getTokenParams();n.storeUID=t,n.pageNumber=1,this.tokenService.setTokenParams(n),this.getTokens()}onProductTypeSelected(t){const n=this.tokenService.getTokenParams();n.productTypeId=t,n.pageNumber=1,this.tokenService.setTokenParams(n),this.getTokens()}onSortSelected(t){const n=this.tokenService.getTokenParams();n.sort=t,this.tokenService.setTokenParams(n),this.getTokens()}onPageChanged(t){const n=this.tokenService.getTokenParams();n.pageNumber!==t&&(n.pageNumber=t,this.tokenService.setTokenParams(n),this.getTokens(!0))}onSearch(){const t=this.tokenService.getTokenParams();t.search=this.searchValue.nativeElement.value,t.pageNumber=1,this.tokenService.setTokenParams(t),this.getTokens()}onReset(){this.searchValue.nativeElement.value="",this.tokenParams=new m,this.tokenService.setTokenParams(this.tokenParams),this.getTokens()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(k))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-token"]],viewQuery:function(t,n){if(1&t&&e.Gf(x,5),2&t){let s;e.iGM(s=e.CRH())&&(n.searchValue=s.first)}},decls:15,vars:7,consts:[[1,"container","mt-2"],[1,"row"],[1,"col-3"],[4,"ngIf"],[1,"col-9"],[1,"d-flex","justify-content-between","align-items-center","pb-2"],[3,"totalCount","pageSize","pageNumber"],["class","d-flex mt-2",4,"ngIf"],[1,"container"],[1,"row","my-3"],[1,"col-sm"],[1,"container-fluid"],["class","col-sm d-flex",4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],[1,"form-select","my-2",3,"change"],[3,"selected","value",4,"ngFor","ngForOf"],[1,"text-warning","ms-3"],[1,"list-group","my-3"],["class","list-group-item",3,"active","value","click",4,"ngFor","ngForOf"],[3,"selected","value"],[1,"list-group-item",3,"value","click"],[1,"d-flex","mt-2"],["placeholder","Search","type","text",1,"form-control","me-2",2,"width","300px",3,"keyup.enter"],["search",""],[1,"btn","btn-outline-primary","mx-2",3,"click"],[1,"btn","btn-outline-success",3,"click"],[1,"col-sm","d-flex"],[3,"token"],[1,"d-flex","justify-content-center"],[3,"pageSize","totalCount","pageNumber","pageChanged"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"section",2),e.YNc(3,S,11,3,"ng-container",3),e.qZA(),e.TgZ(4,"section",4)(5,"div",5),e._UZ(6,"app-paging-header",6),e.YNc(7,U,7,0,"div",7),e.qZA(),e.TgZ(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",1),e.YNc(13,A,2,1,"div",12),e.qZA()()()()(),e.YNc(14,O,2,3,"div",13),e.qZA()()()),2&t&&(e.xp6(3),e.Q6J("ngIf",n.stores&&n.productTypes),e.xp6(3),e.Q6J("totalCount",n.totalCount)("pageSize",n.tokenParams.pageSize)("pageNumber",n.tokenParams.pageNumber),e.xp6(1),e.Q6J("ngIf",n.tokens),e.xp6(6),e.Q6J("ngForOf",n.tokens),e.xp6(1),e.Q6J("ngIf",n.totalCount&&n.totalCount>0))},directives:[a.O5,a.sg,h.YN,h.Kr,v.U,C,Z.P],styles:["img[_ngcontent-%COMP%]{object-fit:scale-down;background-size:contain;height:300px;background-color:#fff;color:#fff}.list-group-item[_ngcontent-%COMP%]{cursor:pointer;border:none;padding:10px 20px;font-size:1.2em}.list-group-item[_ngcontent-%COMP%]:focus{outline:none}.list-group-item.active[_ngcontent-%COMP%]{border-radius:10px}.list-group-item[_ngcontent-%COMP%]:not(.active):hover{color:#fff;background-color:#e95620c2;border-radius:10px}"]}),o})();var N=r(9957);function M(o,i){if(1&o&&(e.TgZ(0,"div",2)(1,"div",3),e._UZ(2,"img",4),e.qZA(),e.TgZ(3,"div",3)(4,"h1"),e._uU(5),e.qZA(),e.TgZ(6,"h5"),e._uU(7,"Recipient Name"),e.qZA(),e.TgZ(8,"p"),e._uU(9),e.qZA(),e.TgZ(10,"h5"),e._uU(11,"Date Created"),e.qZA(),e.TgZ(12,"p"),e._uU(13),e.ALo(14,"date"),e.qZA(),e.TgZ(15,"h5"),e._uU(16,"Date Assigned"),e.qZA(),e.TgZ(17,"p"),e._uU(18),e.ALo(19,"date"),e.qZA(),e.TgZ(20,"h5"),e._uU(21,"Date Collected"),e.qZA(),e.TgZ(22,"p"),e._uU(23),e.ALo(24,"date"),e.qZA(),e.TgZ(25,"h5"),e._uU(26,"Store"),e.qZA(),e.TgZ(27,"p"),e._uU(28),e.qZA(),e.TgZ(29,"h5"),e._uU(30,"Cost Price"),e.qZA(),e.TgZ(31,"p"),e._uU(32),e.ALo(33,"currency"),e.qZA(),e.TgZ(34,"h5"),e._uU(35,"Type"),e.qZA(),e.TgZ(36,"p"),e._uU(37),e.qZA(),e.TgZ(38,"h5"),e._uU(39,"Description"),e.qZA(),e.TgZ(40,"p"),e._uU(41),e.qZA()(),e.TgZ(42,"div",5),e._UZ(43,"div",6),e.qZA()()),2&o){const t=e.oxw();e.xp6(2),e.s9C("src",t.token.imageURL,e.LSH),e.s9C("alt",t.token.tokenName),e.xp6(3),e.Oqu(t.token.tokenName),e.xp6(4),e.Oqu(t.token.recipientName),e.xp6(4),e.Oqu(e.lcZ(14,11,t.token.dateCreated)),e.xp6(5),e.Oqu(e.lcZ(19,13,t.token.dateAssigned)),e.xp6(5),e.Oqu(e.lcZ(24,15,t.token.dateCollected)),e.xp6(5),e.Oqu(t.token.storeName),e.xp6(4),e.Oqu(e.lcZ(33,17,t.token.costPrice)),e.xp6(5),e.Oqu(t.token.productType),e.xp6(4),e.Oqu(t.token.description)}}const I=[{path:"",component:q},{path:":id",component:(()=>{class o{constructor(t,n,s){this.tokenService=t,this.activatedRoute=n,this.breadCrumbService=s,this.breadCrumbService.set("@tokenDetails"," ")}ngOnInit(){this.loadToken()}loadToken(){this.tokenService.getToken(this.activatedRoute.snapshot.paramMap.get("id")).subscribe(t=>{this.token=t,this.breadCrumbService.set("@tokenDetails",t.tokenName)},t=>{console.log(t)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(k),e.Y36(p.gz),e.Y36(N.pm))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-token-details"]],decls:2,vars:1,consts:[[1,"container","mt-5"],["class","row",4,"ngIf"],[1,"row"],[1,"col-6"],[1,"img-fluid","w-100",3,"src","alt"],[1,"row","mt-5"],[1,"col-12","ml-3"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,M,44,19,"div",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",n.token))},directives:[a.O5],pipes:[a.uU,a.H9],styles:[""]}),o})(),data:{breadcrumb:{alias:"tokenDetails"}}}];let w=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[p.Bz.forChild(I)],p.Bz]}),o})(),D=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[a.ez,T.m,w]]}),o})()}}]);